<ion-content class="ion-padding barber-bookings-page">
  <div class="bck-btn-container" style="display:flex; gap:10px;">
    <p style="font-size:30px;" (click)="navigate('/home')">
      <ion-icon name="chevron-back-outline"></ion-icon>
    </p>
    <p style="color:#000; font-weight: bold; font-size:25px; position:relative; top:10px;">Client Bookings</p>
  </div>

  <!-- Tabs (Segment) -->
  <ion-segment [(ngModel)]="selectedTab">
    <ion-segment-button value="upcoming">
      <ion-label>Upcoming</ion-label>
    </ion-segment-button>
    <ion-segment-button value="created">
      <ion-label>Created</ion-label>
    </ion-segment-button>
  </ion-segment>

  <!-- Upcoming Bookings Tab -->
  <div *ngIf="selectedTab === 'upcoming'">
    <div style="display:flex; justify-content: space-between;">
      <h2 class="section-title">Upcoming Bookings</h2>
      <p (click)="toggleSearch()"><ion-icon name="search-outline"></ion-icon></p>
    </div>

    <div class="search-container" *ngIf="searchVisible" style="border-radius: 12px; overflow: hidden;">
      <ion-searchbar 
        [(ngModel)]="searchTerm" 
        (ionInput)="filterBookings()" 
        placeholder="Search...">
      </ion-searchbar>
    </div>


<ion-card *ngFor="let slot of createdBookings" class="booking-card">
  <ion-card-header>
    <ion-card-title>{{ slot.clientName }}</ion-card-title>
    <ion-card-subtitle>{{ slot.service }}</ion-card-subtitle>
  </ion-card-header>

  <ion-card-content>
    <div class="booking-details">
      <p><strong>Date:</strong> {{ slot.date }}</p>
      <p><strong>Time:</strong> {{ slot.time }}</p>
      <p><strong>Status:</strong>
        <ion-badge color="success"  [color]="slot.approveAppointment ? 'success' : 'warning'">
           {{ slot.approveAppointment ? 'Approved' : 'Pending' }}
        </ion-badge>
      </p>
    </div>
  </ion-card-content>

  <div class="booking-actions" style="display:flex; gap:10px; padding: 10px;">
      <ion-button size="small" color="success" (click)="approveSlot(slot.id)">Approve</ion-button>
      <ion-button size="small" color="danger">Decline</ion-button>
      <ion-button size="small" color="tertiary"  [disabled]="!slot.approveAppointment" (click)="navigateToChat(slot.clientId)">Chat</ion-button>
  </div>

</ion-card>



  </div>

  <!-- Created Bookings Tab -->
  <div *ngIf="selectedTab === 'created'">
    <div style="display:flex; justify-content: space-between;">
      <h2 class="section-title">Created Bookings</h2>
      <p (click)="toggleSearchCreatedBookings()"><ion-icon name="search-outline"></ion-icon></p>
    </div>

    <div class="search-container" *ngIf="searchCreatedBookings" style="border-radius: 12px; overflow: hidden;">
      <ion-searchbar 
        [(ngModel)]="searchTerm" 
        (ionInput)="filterBookings()" 
        placeholder="Search...">
      </ion-searchbar>
    </div>

    <div *ngIf="createdBookings.length === 0" class="no-bookings">
      <p>No created bookings found.</p>
    </div>

    <ion-card *ngFor="let booking of createdBookings" class="booking-card">
      <ion-card-header>
        <ion-card-title>{{ booking.clientName }}</ion-card-title>
        <ion-card-subtitle>{{ booking.service }}</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <div class="booking-details">
          <p><strong>Date:</strong> {{ booking.date }}</p>
          <p><strong>Time:</strong> {{ booking.time }}</p>
          <p><strong>Status:</strong> 
            <ion-badge [color]="getStatusColor(booking.status)">
              {{ booking.status }}
            </ion-badge>
          </p>
        </div>
      </ion-card-content>
    </ion-card>
    

  </div>

  <div class="action-btn-container">
    <ion-button expand="block" class="custom-btn" (click)="navigate('/create-slots')">Create Slot</ion-button>
  </div>

</ion-content>
