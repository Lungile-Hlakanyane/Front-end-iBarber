<ion-content class="ion-padding profile-page">

  <div class="bck-btn-container">
    <p style="font-size:30px;" (click)="navigate('/home')"><ion-icon name="chevron-back-outline"></ion-icon></p>
  </div>

  <div class="profile-header">
  <img class="avatar" 
     [src]="selectedImage || defaultImage" 
     alt="Profile Image"  
     (click)="openImageOptions()" />
   <input type="file" #fileInput accept="image/*" hidden (change)="onFileSelected($event)" />
    <h2 class="name">{{user?.username}}</h2>
    <p class="email">{{user?.email}}</p>
  </div>

  <div *ngIf="warnings.length > 0" class="warning-messages">
    <div *ngFor="let warning of warnings" class="warning-banner">
     <ion-icon name="warning-outline" color="danger"></ion-icon>
     <span><strong>Warning:</strong> {{ warning.reason }}</span>
    </div>
  </div>

  <div class="stats-card">
    <div class="stats">
      <div class="stat-item">
        <ion-icon name="calendar-outline"></ion-icon>
        <p style="font-size:13px;">12</p>
        <small>Appointments</small>
      </div>
      <div class="stat-item">
        <ion-icon name="cut-outline"></ion-icon>
        <p style="font-size:13px;">Fade</p>
        <small>Preferred Style</small>
      </div>
      <div class="stat-item">
        <ion-icon name="time-outline"></ion-icon>
        <p style="font-size:13px;">12 Apr 2025</p>
        <small>Last Visit</small>
      </div>
    </div>
  </div>
  
  <ion-list lines="none" class="menu-list" >
    <ion-item button (click)="openEditUserModal()">
      <ion-icon name="person-outline" slot="start"></ion-icon>
      <ion-label>Personal</ion-label>
    </ion-item>

    <ion-item button>
      <ion-icon name="settings-outline" slot="start"></ion-icon>
      <ion-label>General</ion-label>
    </ion-item>

    <ion-item button (click)="openNotificationSettings()">
      <ion-icon name="notifications-outline" slot="start"></ion-icon>
      <ion-label>Notification</ion-label>
    </ion-item>

    <ion-item button *ngIf="role==='barber'" (click)="navigate('/finance-report')">
      <ion-icon name="book-outline" slot="start"></ion-icon>
      <ion-label>View Report</ion-label>
    </ion-item>

    <ion-item button *ngIf="role==='barber'" (click)="navigate('/portfolio')">
      <ion-icon name="grid-outline" slot="start"></ion-icon>
      <ion-label>Portfolio</ion-label>
    </ion-item>

    <ion-item button *ngIf="role==='admin'" (click)="navigate('/analytics')">
      <ion-icon name="pie-chart-outline" slot="start"></ion-icon>
      <ion-label>Analytics</ion-label>
    </ion-item>

    <ion-item button *ngIf="role==='admin'" (click)="navigate('/report-handling')">
      <ion-icon name="book-outline" slot="start"></ion-icon>
      <ion-label>Report Handling</ion-label>
    </ion-item>

    <ion-item button *ngIf="role==='admin'" (click)="navigate('/feedback-support')">
      <ion-icon name="bookmark-outline" slot="start"></ion-icon>
      <ion-label>Feedback Support</ion-label>
    </ion-item>

    <ion-item button *ngIf="role==='admin'" (click)="navigate('/broadcast-announcement')">
      <ion-icon name="volume-high-outline" slot="start"></ion-icon>
      <ion-label>Broadcast Announcement</ion-label>
    </ion-item>

    <ion-item button>
      <ion-icon name="help-circle-outline" slot="start"></ion-icon>
      <ion-label>Help</ion-label>
    </ion-item>
  </ion-list>

</ion-content>
